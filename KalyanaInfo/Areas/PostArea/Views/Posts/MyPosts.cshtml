@model IList<Post>


@foreach (var item in Model.Reverse())
{

    <div class="card mb-3">
        <div>
            <h6 class="card-header"><img src="~/Images/PersonImages/@item.User.Image" style="height:60px;width:60px;border-radius:50%;margin-right:4px" />@item.User.Name<br><span>@DateTime.Now.Subtract(item.CreatedDate).Minutes  <span>minuts ago</span></span></h6>

        </div>
        <div class="card-body">
            @if (!item.Title.Equals("notitle"))
            {
                <h5 class="card-title">@item.Title</h5>
            }
            <p class="card-text">@item.Description</p>
        </div>
        @if (!item.Images.Equals("noimage"))
        {
            <img style="height: 200px; width: 99%; display: block; margin-bottom:3px" src="~/Images/PostImages/@item.Images" alt="Card image">
        }
        @if (!item.Video.Equals("novideo"))
        {
            <video style="height: 200px; width: 99%; display: block; margin-bottom:3px" src="~/Videos/PostVideos/@item.Video" controls autoplay></video>
        }
        <div class="card-body">
            @if (!string.IsNullOrEmpty(Context.Session.GetString("name")))
            {
                <a asp-action="Edit" asp-route-id="@item.Id" class="btn btn-secondary">Edit</a>
                <a class="btn btn-danger " data-toggle="modal" data-target="#exampleModal-@item.Id">Delete</a>
            }

            <a asp-area="PostArea" asp-controller="Posts" asp-action="Details" asp-route-id="@item.Id" class="btn btn-danger">Commint</a>
            <a class="btn btn-primary" data-toggle="collapse" href="#collapseExample-@item.Id" aria-expanded="false" aria-controls="collapseExample-@item.Id">
                <span class="fa fa-share"></span>
            </a>
            <div class="collapse" id="collapseExample-@item.Id">
                <div class="card card-body">
                    <div class="sharethis-inline-share-buttons"></div>
                </div>
            </div>
        </div>

    </div>
    //Modal
    <div class="modal" id="exampleModal-@item.Id" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
        <div class="modal-dialog" role="document">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="exampleModalLabel">Modal title</h5>
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                        <span aria-hidden="true">×</span>
                    </button>
                </div>
                <div class="modal-body">
                    Really want to delete...
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-dismiss="modal">Cancel</button>
                    <button type="button" class="btn btn-danger delpost" id="delbutton" data-cid="@item.Id">ConfirmDelete</button>
                </div>
            </div>
        </div>
    </div>
}



@section Scripts
{
    <script>
        $(function () {
            $(".delpost").click(function () {

                var dep = $(this);

                var depid = dep.data('cid');

                $.ajax({
                    url: '/PostArea/Posts/DeletePost',
                    type: 'POST',
                    data: {
                        id: depid
                    },
                    success: function (returndata) {
                        if (returndata == "1") {
                            $("#PostDiv").hide();
                            $("#exampleModal-" + depid).modal('hide');
                        } else {
                            alert("Not Found");
                        }
                    },
                    Error: function (er) {
                        alert(er)
                    }
                })
            })
        });
    </script>

}